# Поваренная Книга Vim

Оригинал: [dw-ap.blogspot.com](http://dw-ap.blogspot.com/2005/08/vim.html), [DW's journal](http://dw-ap.blogspot.com/) 
Перевод: [DW](mailto:dw at smtp.ru).

Это страница Поваренной Книги *Vim*. Она содержит короткие рецепты как сделать много простых и не простых вещей в *Vim*. Для начала ознакомления вы уже должны знать основы *Vim*, однако каждая команда детально объясняется.

Каждый набор инструкций является завершенным. Чувствуйте себя как дома и выбирайте именно то что вам нужно.

## Перестановка символов

Если вы быстро печатаете, ваши пальцы могут легко обогнать ваш разум. Часто люди путают местами символы. Например "the" превращается в "teh".

Для перестановки двух символов, к примеру "e" и "h", поместите курсор на "e" и наберите xp.

Команда "x" удаляет символ ("e") и "p" вставляет его после курсора (который теперь находится над "h".)

## Интерактивная замена одного слова другим (метод командной строки)

Предположим, вы хотите заменить в тексте каждое слово "идиот"словом "менеджер". Но вы хотите иметь возможность предпросмотра до замены.

Для этого нужно:

| #  |   Команды    |                                                      Разъяснение                                                      |
|----|--------------|-----------------------------------------------------------------------------------------------------------------------|
| 1. | *1G*         | Перейти в начало документа                                                                                            |
| 2. | */идиот*     | Найти первое вхождение слова "идиот"                                                                                  |
| 3. | *cwменеджер* | Заменить слово (cw) на менеджер                                                                                       |
| 4. | *n*          | Повторить последний поиск (найти следующего идиота.)                                                                  |
| 5. | *. (точка)*  | Повторить последнее редактирование, заменить слово на "менеджер"(Если вы не хотите менять слово, пропустите этот шаг) |

Повторяйте шаги 4 и 5 пока не замените все вхождения

### Какая Дева!?

Церковь только что купила свой первый компьютер и учиться его использовать. Церковный секретарь решила составить формальную прощальную проповедь для использования на похоронах. Имя покойного она решила заполнять в выражение "<имя>". При очередных похоронах она бы просто заменяла это выражение на имя покойного.

Как-то раз, когда проходили двое похорон, первое - некоей Марии, второе для некоей Эдны. Так что секретарь применила глобальную замену "<имя>" на "Мария". Отлично. Затем, во время вторых похорон, она заменила "Мария" на "Эдна". Это было ошибкой.

Представьте удивление священника, когда он начал чтение и произнес "Рождение Пресвятой Девы Эдны".

## Интерактивная замена одного слова другим (метод командной строки)

Предположим, вы хотите заменить в тексте каждое слово "идиот"словом "менеджер". Но вы хотите иметь возможность предпросмотра до замены.

Выполните команду :

```
:%s/\<идиот\>/менеджер/gc
```

Эта команда будет производить замену и останавливаться после каждого изменения, чтобы дать вам возможность подтвердить его. Ввод "y"означает принятие, а "n" - отказ от изменения.

Команда состоит из :

| #  |   Команды   |                                                      Разъяснение                                                       |
|----|-------------|------------------------------------------------------------------------------------------------------------------------|
| 1. | :           | Вход в командный режим                                                                                                 |
| 2. | %           | Выполнить эту команду на всех строках (% - синоним "от первой до последней строки".)                                   |
| 3. | s           | Сокращенная форма команды **:substitute**                                                                              |
| 4. | /\<идиот\>/ | Это выражение определяет текст, над которым предполагается поколдовать. \</b0> отмечает начало слова и \> - его конец. |
| 5. | /менеджер/  | Подставляемый текст                                                                                                    |
| 6. | gc          | Флаги                                                                                                                  |
|    |             | g - Глобально -- Заменяет каждое вхождение, не используя "с начала и до конце" на каждой строке                        |
|    |             | c - Подтверждение -- Спрашивать перед каждой заменой                                                                   |

## Замена одного слова другим одной командой

Предположим, вы хотите заменить в тексте каждое слово "идиот"словом "менеджер". И нет необходимости в подтверждении, так как все идиоты - менеджеры.

Используйте команду :

```
:%s/\<идиот\>/менеджер/g
```

Команда состоит из :

| #  |   Команды   |                                                      Разъяснение                                                       |
|----|-------------|------------------------------------------------------------------------------------------------------------------------|
| 1. | :           | Вход в командный режим                                                                                                 |
| 2. | %           | Выполнить эту команду на всех строках (% - синоним "от первой до последней строки".)                                   |
| 3. | s           | Сокращенная форма команды :substitute.                                                                                 |
| 4. | /\<идиот\>/ | Это выражение определяет текст, над которым предполагается поколдовать. \</b0> отмечает начало слова и \> - его конец. |
| 5. | /менеджер/  | Подставляемый текст                                                                                                    |
| 6. | g           | Глобальный флаг -- Этот флаг говорит Vim заменить каждое вхождение на лини, то есть не только первое.                  |

## Перемещение текста (в стиле Vi)

Предположим вы хотите переместить параграфы с верхней части теста в нижнюю. Есть несколько способов сделать это. В этом примере мы используем стиль Vi. В следующей части Перемещение текста (Визуальный режим) мы делаем это, используя команды Vim.

Выполните следующие действия :

| #  | Команды |                                                     Разъяснение                                                      |
|----|---------|----------------------------------------------------------------------------------------------------------------------|
| 1. |         | Переместите курсор на верх участка, который вы хотите переместить.                                                   |
| 2. | ma      | Поместите здесь метку "a". (Vim не выдает сообщения о выполнении этой команды. Другими словами, экран не изменится.) |
| 3. |         | Переместите курсор внизу участка, который вы хотите переместить.                                                     |
| 4. | d'a     | Удалите метку "a". Это поместит удаленный текст в буфер.                                                             |
| 5. |         | Переместите курсор на строку, где следует находиться тексту. Текст будет на следующей строке.                        |
| 6. | p       | Вставить текст подкурсором                                                                                           |

## Перемещение текста (Визуальный способ).

Предположим вы хотите переместить параграфы с верхней части теста в нижнюю. Есть несколько способов сделать это. В этом примере мы используем стиль Vim. В предыдущей части Перемещение текста (старый способ) мы делали это, используя команды Vi.

Выполните следующие действия :

| #  | Команды |                                                                   Разъяснение                                                                   |
|----|---------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| 1. |         | Переместите курсор на верх участка, который вы хотите переместить.                                                                              |
| 2. | v       | Войдите в визуальный режим. (Если вы хотите переместить только полные линии, используйте команду V, которая включает визуальный строчный режим. |
| 3. |         | Переместите курсор внизу участка, который вы хотите переместить. Текст, предназначенный для перемещения, будет выделен.                         |
| 4. | d       | Выполняет визуальное удаление. Другими словами, удалить выделенный текст.                                                                       |
| 5. |         | Переместите курсор на строку, где следует находиться тексту. Текст будет на следующей строке.                                                   |
| 6. | p       | Вставить текст под курсором.                                                                                                                    |

## Копирование участка текста из одного файла в другой (В стиле Vi Style)

Есть несоклько способов копировать текст из одного файла в другой. В этом разделе более традиционные команды Vi. В следующем разделе Копирование с использованием визуального режима, мы выполним те же операции использую Визуальный режим.

Чтобы скопировать участок текста из одного файла в другой, введите следующие команды:

